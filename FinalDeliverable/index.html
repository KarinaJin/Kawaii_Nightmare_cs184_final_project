<html>
	<head>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default'></script>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
		<style>
			h1 {
				text-align: center;
			}
			.container {
				margin: 0 auto;
				padding: 60px 20%;
			}
			figure {
				text-align: center;
			}
			img {
				display: inline-block;
			}
			body {
				font-family: 'Inter', sans-serif;
			}
			.tab-bar {
				position: fixed;
				top: 0;
				left: 0;
				right: 0;
				width: 100%;
				background-color: #ffccea;
				display: flex;
				flex-wrap: wrap;
				justify-content: space-between;
				align-items: center;
				z-index: 999;
				padding: 10px 16px;
				box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
			}
			.tab-title {
				font-weight: 600;
				font-size: 15px;
				flex-shrink: 0;
				white-space: nowrap;
				margin-right: auto;
			}
			.tab-links {
				display: flex;
				flex-wrap: wrap;
				gap: 8px;
				min-width: 0;
				overflow-x: auto;
				padding-right: 50px;
			}
			.tab-button {
				text-decoration: none;
				color: black;
				font-size: 15px;
				padding: 8px 16px;
				border: none;
				background-color: inherit;
				cursor: pointer;
				transition: background-color 0.3s;
				font-weight: 600;
				white-space: nowrap;
			}
			.tab-button:hover {
				background-color: #c77fe3a7;
			}
			.tab-button.active {
				background-color: #c274e0;
			}
		</style>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Final Deliverable</title>
	</head>
	<body>
		<div class="tab-bar">
			<div class="tab-title">CS 184/284A Spring 2025 Final Project</div>
			<div class="tab-links">
				<a href="https://karinajin.github.io/Kawaii_Nightmare_cs184_final_project/Proposal/index.html" class="tab-button">Proposal</a>
				<a href="https://karinajin.github.io/Kawaii_Nightmare_cs184_final_project/Milestone/index.html" class="tab-button">Milestone</a>
				<a href="https://karinajin.github.io/Kawaii_Nightmare_cs184_final_project/FinalDeliverable/index.html" class="tab-button active">Final Deliverable</a>
			</div>
		</div>

		<div class="container">
			<h1>Team 40: Kawaii Nightmare - Horror De-Horror-fied</h1>
			<div style="text-align: center;">Team Members: Angela Marey Rodriguez, Anthea Guo, Jackie Lian, Karina Jin</div>
			<br>

			<figure>
				<iframe width="100%" height="400"
						src="https://www.youtube.com/embed/qpaObhTRcTo"
						title="Demo Video"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
						allowfullscreen>
				</iframe>
				<figcaption>Demo Video</figcaption>
			</figure>

			Link to webpage: <a href="https://karinajin.github.io/Kawaii_Nightmare_cs184_final_project/FinalDeliverable/index.html">Kawaii_Nightmare_cs184_final_project/Milestone/index.html</a><br>
			Link to demo video: <a href="https://youtu.be/qpaObhTRcTo">Demo Video</a><br>
			Link to presentation slides: <a href="https://docs.google.com/presentation/d/1zt-sbrLjKvNAveC40DWSor0WB6StELRZi2beE25_I7M/edit?slide=id.p#slide=id.p">Final Deliverable Video Slides</a><br>
			Link to presentation slides for TA: <a href="https://docs.google.com/presentation/d/1zt-sbrLjKvNAveC40DWSor0WB6StELRZi2beE25_I7M/edit?slide=id.p#slide=id.p">Final Deliverable Presentation Slides</a>

			<h2>Abstract</h2>
			<p>
				<span style="color: black;">
					Our goal for this project is to make horror games more accessible to a broader range of players. We used pixel shading and model swapping to create a less horrifying experience for the user when playing horror games. In this project, we demonstrated these effects on the classic horror game Resident Evil. Specifically, we developed toon shaders, pixel shaders, color filters, watercolor shaders, and soft blending from scratch. After this we used the FluffyQuack 5000 mod manager to implement mod swapping, swapping zombies for Carebears, Teletubbies, and Star Wars characters.
				</span>
			</p>

            <style>
                .shader-subsection {
                  padding-left: 20px;
                  margin-bottom: 24px;
                }
            </style>

			<h2>Technical approach</h2>
			<h3>1. Shaders</h3>
			<p>We developed four core shaders—Toon, Pink Filter, Pixelation, and Edge Detection—plus three artistic effects (Watercolor, Rainbow Shadows, Vignette). Each runs in ReShade to reimagine dark horror scenes as bright, playful visuals while preserving performance.</p>

            <div class="shader-subsection">
                <h4>1.1 Toon Shader</h4>
                <ul>
                    <li><strong>Brightness Boost:</strong>
                        <pre><code>C = tex2D(ReShade::BackBuffer, texcoord).rgb * k</code></pre>
                    </li>
                    <li><strong>Luminance:</strong>
                        <code>L = 0.299 R + 0.587 G + 0.114 B</code> approximates human-perceived brightness.
                    </li>
                    <li><strong>Dark Lift:</strong>
                        If <code>L &lt; L<sub>min</sub></code>, then:
                        <pre><code>L = lerp(L, L_min, alpha)</code></pre>
                    </li>
                    <li><strong>Quantization:</strong>
                        Given levels <code>N</code>, compute:
                        <pre><code>q = floor(L * N) / N
    C_final = saturate(C * q)</code></pre>
                    </li>
                </ul>
            </div>
			
            <div class="shader-subsection">
                <h4>1.2 Pink Filter</h4>
                <p>Two modes map hues into magenta-themed palettes:</p>
                <ul>
                    <li><strong>HSV Remapping:</strong>
                        <ol>
                            <li>Convert <code>RGB → HSV</code>.</li>
                            <li>Clamp hue <code>H</code> into narrow magenta range.</li>
                            <li>Convert back to <code>RGB</code>, preserving original <code>S</code> and <code>V</code>.</li>
                        </ol>
                    </li>
                    <li><strong>Value-Based Layers:</strong>
                        Compute pseudo-value:
                        <pre><code>V' = r * 8 + g * 4 + b * 2</code></pre>
                        Quantize <code>V'</code> into bins, assign each a fixed pink shade.
                    </li>
                </ul>
            </div>
			

            <div class="shader-subsection">
                <h4>1.3 Pixelation Shader</h4>
                <ul>
                    <li><strong>Block Sampling:</strong>
                    <pre><code>blockUV = floor(uv / PixelSize) * PixelSize;
    c = tex2D(screenSampler, blockUV);</code></pre>
                    </li>
                    <li><strong>Brightness:</strong>
                    <pre><code>c *= Brightness;  /* Brightness > 1 */</code></pre>
                    </li>
                    <li><strong>Channel Boosts:</strong>
                    <pre><code>c.r *= RedBoost;
    c.g *= GreenBoost;
    c.b *= BlueBoost;</code></pre>
                    </li>
                </ul>
            </div>
			

            <div class="shader-subsection">
                <h4>1.4 Edge Detection Shader</h4>
                <ul>
                    <li><strong>Gaussian Pre-Blur:</strong> Convolve with 3x3 kernel <code>G</code> and blend via <code>NoiseReduction</code>.</li>
                    <li><strong>Sobel Gradient:</strong>
                        <pre><code>M = sqrt(G_x * G_x + G_y * G_y);</code></pre>
                    </li>
                    <li><strong>Adaptive Thresholding:</strong>
                        <pre><code>T = T_base * f(ΔL);</code></pre>
                    </li>
                    <li><strong>Hysteresis:</strong>
                        <ul>
                            <li>Strong edges: <code>M &gt; T_high</code></li>
                            <li>Weak edges: <code>T_low &lt; M &lt; T_high</code>, kept if connected to strong edges</li>
                        </ul>
                    </li>
                    <li><strong>Rendering:</strong> Color with <code>EdgeColor</code>, scale by <code>EdgeWidth</code>, blend via <code>EdgeOpacity</code>.</li>
                </ul>
            </div>

            <div class="shader-subsection">
                <h4>1.4 Edge Detection Shader</h4>
                <ul>
                    <li><strong>Gaussian Pre-Blur:</strong> Convolve with 3x3 kernel <code>G</code> and blend via <code>NoiseReduction</code>.</li>
                    <li><strong>Sobel Gradient:</strong>
                        <pre><code>M = sqrt(G_x * G_x + G_y * G_y);</code></pre>
                    </li>
                    <li><strong>Adaptive Thresholding:</strong>
                        <pre><code>T = T_base * f(ΔL);</code></pre>
                    </li>
                    <li><strong>Hysteresis:</strong>
                        <ul>
                            <li>Strong edges: <code>M &gt; T_high</code></li>
                            <li>Weak edges: <code>T_low &lt; M &lt; T_high</code>, kept if connected to strong edges</li>
                        </ul>
                    </li>
                    <li><strong>Rendering:</strong> Color with <code>EdgeColor</code>, scale by <code>EdgeWidth</code>, blend via <code>EdgeOpacity</code>.</li>
                </ul>
            </div>
			

            <div class="shader-subsection">
                <h4>1.6 Rainbow Shadows Shader</h4>
                <ul>
                    <li><pre><code>L = 0.299*R + 0.587*G + 0.114*B;</code></pre></li>
                    <li>If <code>L &lt; ShadowThreshold</code>:
                        <pre><code>h = baseHue + Timer;
    rainbow = abs(frac(h + float3(0,1/3,2/3))*6 - 3) * RainbowSaturation;
    Out = lerp(origColor, rainbow, RainbowIntensity);</code></pre>
                    </li>
                </ul>
            </div>
			

            <div class="shader-subsection">
                <h4>1.7 Vignette Shader</h4>
                <ul>
                    <li><pre><code>d = length(uv - float2(0.5,0.5));
    v = smoothstep(Radius, Radius - Softness, d);</code></pre></li>
                    <li><pre><code>Out = lerp(sceneColor, VignetteColor, v * VignetteIntensity);</code></pre></li>
                </ul>
            </div>
			

			<h3>2. Model Swapping</h3>
			<ul>
				<li><strong>Setup:</strong>
					<ul>
						<li>Install FluffyQuack 5000, target <code>RE2Demo</code>.</li>
						<li>Download mod <code>.pak</code>, convert via OpenIV to <code>TXD/DFF</code>.</li>
						<li>Place in <code>modmanager/RE2Demo/Mods</code>.</li>
					</ul>
				</li>
				<li><strong>Activation:</strong>
					<p>Relaunch FluffyQuack → toggle mod and launch demo to verify.</p>
				</li>
				<li><strong>Implementation:</strong>
					<p>Hook <code>ReShade::DrawModelReplacement</code> to intercept mesh loads, remap IDs, and update <code>modelinfo.meta</code>.</p>
				</li>
			</ul>

			<h2>Results</h2>
			<p></p>

			<h2>References</h2>
			<p></p>

			<h2>Contribution</h2>
			<p></p>
		</div>
	</body>
</html>