<html>
	<head>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default'></script>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
		<style>
			h1 {
				text-align: center;
			}

			.container {
				margin: 0 auto;
				padding: 60px 20%;
			}

			figure {
				text-align: center;
			}

			img {
				display: inline-block;
			}

			body {
				font-family: 'Inter', sans-serif;
			}
            .tab-bar {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                width: 100%;
                background-color: #ffccea;
                display: flex;
                flex-wrap: wrap;
                justify-content: space-between;
                align-items: center;
                z-index: 999;
                padding: 10px 16px;
                box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            }
            .tab-title {
                font-weight: 600;
                font-size: 15px;
                flex-shrink: 0;
                white-space: nowrap;
                margin-right: auto;
            }
            .tab-links {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                min-width: 0;
                overflow-x: auto;
                padding-right: 50px;
            }
            .tab-button {
                text-decoration: none;
                color: black;
                font-size: 15px;
                padding: 8px 16px;
                border: none;
                background-color: inherit;
                cursor: pointer;
                transition: background-color 0.3s;
                font-weight: 600;
                white-space: nowrap;
            }
            .tab-button:hover {
                background-color: #c77fe3a7;
            }
            .tab-button.active {
                background-color: #c274e0;
            }
		</style>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Final Deliverable</title>
	</head>
	<body>
        <div class="tab-bar">
            <div class="tab-title">CS 184/284A Spring 2025 Final Project</div>
            <div class="tab-links">
              <a href="https://karinajin.github.io/Kawaii_Nightmare_cs184_final_project/Proposal/index.html" class="tab-button">Proposal</a>
              <a href="https://karinajin.github.io/Kawaii_Nightmare_cs184_final_project/Milestone/index.html" class="tab-button">Milestone</a>
              <a href="https://karinajin.github.io/Kawaii_Nightmare_cs184_final_project/FinalDeliverable/index.html" class="tab-button active">Final Deliverable</a>
            </div>
        </div>

		<div class="container">
		<h1>Team 40: Kawaii Nightmare - Horror De-Horror-fied</h1>
        <div style="text-align: center;">Team Members: Angela Marey Rodriguez, Anthea Guo, Jackie Lian, Karina Jin </div>
        <br>

        <figure>
          <iframe width="100%" height="400"
                  src="https://www.youtube.com/embed/qpaObhTRcTo"
                  title="Demo Video"
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                  allowfullscreen>
          </iframe>
          <figcaption>Demo Video</figcaption>
        </figure>

		<!--
		We've already added one heading per part, to make your write-up as navigable when grading. Please fit your write-up within these sections!
		-->

		Link to webpage: <a href="https://karinajin.github.io/Kawaii_Nightmare_cs184_final_project/FinalDeliverable/index.html">Kawaii_Nightmare_cs184_final_project/Milestone/index.html</a>
		<br>
        Link to demo video: <a href="https://youtu.be/qpaObhTRcTo">Demo Video</a>
		<br>
        Link to presentation slides: <a href="https://docs.google.com/presentation/d/1zt-sbrLjKvNAveC40DWSor0WB6StELRZi2beE25_I7M/edit?slide=id.p#slide=id.p">Final Deliverable Video Slides</a>
    <br>
        Link to presentation slides for TA: <a href="https://docs.google.com/presentation/d/1zt-sbrLjKvNAveC40DWSor0WB6StELRZi2beE25_I7M/edit?slide=id.p#slide=id.p">Final Deliverable Presentation Slides</a>


        <h2>Abstract</h2>
		      <p>
                <span style="color: black;"> </span><br>
		      </p>

        <h2>Technical approach</h2>
		      <p>
                <h3>1.Shaders</h3>
                    <p>We developed four core shaders—Toon, Pink Filter, Pixelation, and Edge Detection—plus three artistic effects (Watercolor, Rainbow Shadows, Vignette). Each runs in ReShade to reimagine dark horror scenes as bright, playful visuals while preserving performance.</p>

                <h4>1.1 Toon Shader</h4>
                    <ul>
                        <li><strong>Brightness Boost:</strong>
                            <pre><code>C = tex2D(ReShade::BackBuffer, texcoord).rgb * k</code></pre>
                        </li>
                        <li><strong>Luminance:</strong>
                            <p><code>L = 0.299 R + 0.587 G + 0.114 B</code> approximates human-perceived brightness.</p>
                        </li>
                        <li><strong>Dark Lift:</strong>
                            <p>If <code>L &lt; L<sub>min</sub></code>, then:</p>
                            <pre><code>L = lerp(L, L_min, alpha)</code></pre>
                        </li>
                        <li><strong>Quantization:</strong>
                            <p>Given levels <code>N</code>, compute:</p>
                            <pre><code>q = floor(L * N) / N <br>C_final = saturate(C * q)</code></pre>
                            <p>where <code>saturate()</code> clamps to [0,1].</p>
                        </li>
                    </ul>

                <h4>1.2 Pink Filter</h4>
                    <p>Two modes map hues into magenta-themed palettes:</p>
                        <ul>
                            <li><strong>HSV Remapping:</strong>
                            <ol>
                                <li>Convert <code>RGB → HSV</code>.</li>
                                <li>Clamp hue <code>H</code> into narrow magenta range.</li>
                                <li>Convert back to <code>RGB</code>, preserving original <code>S</code> and <code>V</code>.</li>
                            </ol>
                            </li>
                            <li><strong>Value-Based Layers:</strong>
                                <p>Compute pseudo-value:</p>
                                <pre><code>V' = r * 8 + g * 4 + b * 2</code></pre>
                                <p>Quantize <code>V'</code> into bins, assign each a fixed pink shade.</p>
                            </li>
                        </ul>

                <h4>1.3 Pixelation Shader</h4>
                    <ol>
                        <li><strong>Block Sampling:</strong>
                            <pre><code>blockUV = floor(uv / PixelSize) * PixelSize;<br>c = tex2D(screenSampler, blockUV);</code></pre>
                        </li>
                        <li><strong>Brightness:</strong>
                            <pre><code>c *= Brightness;  /* Brightness > 1 */</code></pre>
                        </li>
                        <li><strong>Channel Boosts:</strong>
                            <pre><code>c.r *= RedBoost;<br>c.g *= GreenBoost;<br>c.b *= BlueBoost;</code></pre>
                        </li>
                    </ol>
                <h4>1.4 Edge Detection Shader</h4>
                    <ul>
                        <li><strong>Gaussian Pre-Blur:</strong> Convolve with 3x3 kernel <code>G</code> and blend via <code>NoiseReduction</code>.</li>
                        <li><strong>Sobel Gradient:</strong>
                        <p>Compute:</p>
                            <pre><code>M = sqrt(G_x * G_x + G_y * G_y);</code></pre>
                        </li>
                        <li><strong>Adaptive Thresholding:</strong>
                        <p>Over each 3x3 window compute <code>ΔL = max - min</code>, then adjust:</p>
                            <pre><code>T = T_base * f(ΔL);</code></pre>
                        </li>
                        <li><strong>Hysteresis:</strong>
                    <ul>
                        <li>Strong edges: <code>M &gt; T_high</code></li>
                        <li>Weak edges: <code>T_low &lt; M &lt; T_high</code>, kept if connected to strong edges</li>
                    </ul>
                        </li>
                        <li><strong>Rendering:</strong> Color with <code>EdgeColor</code>, scale by <code>EdgeWidth</code>, blend via <code>EdgeOpacity</code> or render on a white/black background.</li>
                        </ul>

                <h4>1.5 Watercolor Effect Shader</h4>
                    <ul>
                        <li><strong>Depth Edges:</strong>
                            <pre><code>D0 = GetLinearizedDepth(uv);<br>Di = sample neighbors;<br>edgeDepth = (max(abs(D0 - Di)) &gt; DepthThreshold) ? OutlineThickness : 0;</code></pre>
                        </li>
                        <li><strong>Color Edges:</strong>
                            <pre><code>edgeColor = (max(abs(C0 - Ci)) &gt; ColorThreshold) ? OutlineThickness : 0;</code></pre>
                        </li>
                        <li><strong>Composite & Blur:</strong>  
                            <pre><code>E = max(edgeDepth, edgeColor);<br>B = average 3x3 box blur of origColor;<br>Out = lerp(origColor, B, BlendStrength);</code></pre>
                        </li>
                        <li><strong>Paper Texture:</strong>  
                            <p>Resize to screen ratio, pick <code>Oklab</code> or <code>sRGB</code>, combine via <code>fEdgeDensity</code>, <code>fPaperDensity</code>, <code>fDensityOffset</code>, convert to RGB.</p>
                        </li>
                    </ul>

                <h4>1.6 Rainbow Shadows Shader</h4>
                    <ul>
                        <li>Compute luminance:
                            <pre><code>L = 0.299*R + 0.587*G + 0.114*B;</code></pre>
                        </li>
                        <li>If <code>L &lt; ShadowThreshold</code>, then:
                            <pre><code>h = baseHue + Timer;<br>rainbow = abs(frac(h + float3(0,1/3,2/3))*6 - 3) * RainbowSaturation;<br>Out = lerp(origColor, rainbow, RainbowIntensity);</code></pre>
                        </li>
                    </ul>

                <h4>1.7 Vignette Shader</h4>
                    <ul>
                        <li>Distance mask:
                            <pre><code>d = length(uv - float2(0.5,0.5));<br>v = smoothstep(Radius, Radius - Softness, d);</code></pre>
                        </li>
                        <li>Blend:
                            <pre><code>Out = lerp(sceneColor, VignetteColor, v * VignetteIntensity);</code></pre>
                        </li>
                    </ul>

                <h3>2. Model Swapping</h2>
                    <ol>
                        <li><strong>Setup:</strong>
                        <ul>
                            <li>Install FluffyQuack 5000, target <code>RE2Demo</code>.</li>
                            <li>Download mod <code>.pak</code> (e.g., from NexusMods), convert via OpenIV to <code>TXD/DFF</code>.</li>
                            <li>Place in <code>modmanager/RE2Demo/Mods</code>.</li>
                        </ul>
                        </li>
                        <li><strong>Activation:</strong>
                         <p>Relaunch FluffyQuack → model index flips (e.g., Leon 0→1). Toggle mod and launch demo to verify.</p>
                        </li>
                        <li><strong>Implementation:</strong>
                         <p>Hook <code>ReShade::DrawModelReplacement</code> to intercept mesh loads, remap IDs, and update <code>modelinfo.meta</code> for geometry &amp; textures.</p>
                        </li>
                    </ol>
		      </p>

        
        <h2>Results</h2>
          <p>

          </p>
		

        <h2>References</h2>
          <p>

		      </p>

        <h2>Contribution</h2>
          <p>

		      </p>
	</body>
</html>
